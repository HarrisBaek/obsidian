
#### Loading Page
- 보통 CSR일 경우에는 로딩을 개발자가 컨트롤 하지만 (Suspense로 이용)
- SSR시에도 페이지를 로딩하는 동안에 원하는 UI를 전달할수있다.
- loading.ts 파일을 만들면, 서버에서 먼저 로딩페이지를 내려줘 사용자에게 보여주고, 끝나면 완료된 페이지를 넘겨준다.
https://velog.io/@jay/Next.js-13-master-course-loading-error-UI


```ad-note
title: Loading UI and Streaming
  
특수 파일 loading.js는 React Suspense를 사용하여 의미 있는 로딩 UI를 만드는 데 도움이 됩니다.  
이 규칙을 사용하면 route 세그먼트의 콘텐츠가 로드되는 동안 서버에서 즉시 로딩 상태를 표시할 수 있습니다. 렌더링이 완료되면 새 콘텐츠가 자동으로 교체됩니다.  
즉시 로딩 상태는 탐색 시 즉시 표시되는 대체 UI입니다. 스켈레톤, 스피너 등 로딩 표시기나 표지 사진, 제목 등 미래 화면의 작지만 의미 있는 부분을 미리 렌더링할 수 있습니다.  
  
https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming
```


#### Multi Fetching
만약 2개의 Fetch가 필요한 화면에서 첫번째가 20초, 두번째가 1초 걸리면 총 21초의 로딩시간이 필요하다.
```typescript
const movie = await getMovie(id); // 20sec
const videos = await getVideos(id); // 1sec
// total : 21sec

//Solution 
const [movie, videos] = await Promise.all([getMovie(id), getVideos(id)]);
//병렬도 시작, 하지만 어쨋든 두개다 로드완료되어야 사용자에게 화면을 보여준다.


//Suspense를 이용한 병렬 Fetching
export default async function MovieDetail({ params: { id } }: Props) {
  return (
    <div>
      <Suspense fallback={<h1>Loading Movie Info</h1>}>
        <MovieInfo id={id} />
      </Suspense>
      <Suspense fallback={<h1>Loading Movie Videos</h1>}>
        <MovieVideos id={id} />
      </Suspense>
    </div>
  );
}

```

