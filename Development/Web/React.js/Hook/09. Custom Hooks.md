

- hook을 사용하는 중복코드를 custom훅으로 합치는것이 가능하다 사용가능하다. 

#### 잘못된 예제

- 아래처럼 같은 기능의 사용할 경우, state및 기능이 여러개 필요해서 중복코드가 커진다.
```typescript
function App() {
  const [inputValue, setInputValue] = useState('');
  const [inputValue2, setInputValue2] = useState('');
  const [inputValue3, setInputValue3] = useState('');

  const handleChange = (e:React.ChangeEvent<HTMLInputElement>) =>{
    setInputValue(e.target.value)
  }
  const handleSubmit = () => {
    alert(inputValue);
    setInputValue('')
  };
  const handleChange2 = (e:React.ChangeEvent<HTMLInputElement>) =>{
    setInputValue(2e.target.value)
  }
  const handleSubmit2 = () => {
    alert(inputValue);
    setInputValue2('')
  };
  const handleChange3 = (e:React.ChangeEvent<HTMLInputElement>) =>{
    setInputValue3(e.target.value)
  }
  const handleSubmit3 = () => {
    alert(inputValue);
    setInputValue3('')
  };

  return (
    <div>
      <h1 className="font-xl">useInput</h1>      
      <input className="border" value={inputValue} onChange={handleChange} />
      <input className="border" value={inputValue2} onChange={handleChange2} />
      <input className="border" value={inputValue3} onChange={handleChange3} />
      <button className="border" onClick={handleSubmit}>OK</button>
    </div>
  );
}
export default App;

```

```typescript
//useInput.ts
export function useInput(
  initialValue: string,
  submitAction: (value: string) => void
): [string, (e: React.ChangeEvent<HTMLInputElement>) => void, () => void] {
  const [inputValue, setInputValue] = useState(initialValue);

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setInputValue(e.target.value);
  };

  const handleSubmit = () => {
    setInputValue("");
    submitAction(inputValue);
  };

  return [inputValue, handleChange, handleSubmit];
}

//App.tsx
function App() {
  const [inputValue, handleChange,handleSubmit]= useInput('',()=>{});
  const [inputValue2, handleChange2,handleSubmit2]= useInput('',()=>{});
  const [inputValue3, handleChange3,handleSubmit3]= useInput('',()=>{});

  return (
    <div>
      <h1 className="font-xl">useInput</h1>      
      <input className="border" value={inputValue} onChange={handleChange} />
      <input className="border" value={inputValue2} onChange={handleChange2} />
      <input className="border" value={inputValue3} onChange={handleChange3} />
      <button className="border" onClick={handleSubmit}>OK</button>
    </div>
  );

}
export default App;

```



#### 잘못된 예제2
- 아래 fetchURL이 반복되고, json여러개 저장할려면 state 여러개 만들어야함.
```typescript
//아래 FetchURL이 반복됨
const baseUrl = "https://jsonplaceholder.typicode.com";
function App() {
  const [data, setData] = useState(null);

  const fetchUrl = (type: string) => {
    fetch(baseUrl + "/" + type)
      .then((res) => res.json())
      .then((res) => {
        setData(res);
        console.log(res);
      });
  };
  useEffect(() => {
    fetchUrl("users");
  }, []);

  return (
    <div>
      <h1>useFetch</h1>
      <button className="border" onClick={()=>fetchUrl("users")}>Users</button>
      <button className="border" onClick={()=>fetchUrl("posts")}>Posts</button>
      <button className="border" onClick={()=>fetchUrl("todos")}>Todos</button>
      <pre>{JSON.stringify(data, null, 2)}</pre>
    </div>
  );
}
export default App;
```


```typescript

//userFetch.ts
export function useFetch(baseUrl: string, initialType: string) {
  const [data, setData] = useState(null);

  const fetchUrl = (type: string) => {
    fetch(baseUrl + "/" + type)
      .then((res) => res.json())
      .then((res) => {
        setData(res);
        console.log(res);
      });
  };
  useEffect(() => {
    fetchUrl(initialType);
  }, []);

  return { data, fetchUrl };
}

//App.tsx

const baseUrl = "https://jsonplaceholder.typicode.com";
function App() {
  const {data :userData}  = useFetch(baseUrl,'users');
  const {data :postData}  = useFetch(baseUrl,'posts');
  const {data :todoData}  = useFetch(baseUrl,'todos');

  return (
    <div>
      <h1>useFetch</h1>
      {/* <button className="border" onClick={()=>fetchUrl("users")}>Users</button>
      <button className="border" onClick={()=>fetchUrl("posts")}>Posts</button>
      <button className="border" onClick={()=>fetchUrl("todos")}>Todos</button> */}
      {userData && <pre>{JSON.stringify(userData[0], null, 2)}</pre>}
      {postData && <pre>{JSON.stringify(postData[0], null, 2)}</pre>}
      {todoData && <pre>{JSON.stringify(todoData[0], null, 2)}</pre>}
    </div>
  );
}
export default App;

```