---
title: 1. Basic SQL Query
date: 2022-10-21
type:  blog
author: harris baek
email: baekjh09@naver.com
---
tags: #postgresq, #sql, #db 


**SELECT
```sql
#select

SELECT * FROM person;

SELECT first_name FROM person;
SELECt first_name,last_name FROM person;

```


**ORDER BY
```sql
SELECT * FROM person ORDER BY first_name

	SELECT * FROM person ORDER BY first_name DESC

SELECT * FROM person ORDER BY first_name, country_of _birth DESC
```


**DISTINCT (중복제거)
```sql
SELECT DISTINCT country_of_birth FROM person 
```


**WHERE
```sql
SELECT * FROM person WHERE gender = 'Female'

SELECT * FROM person WHERE gender = 'Male' AND (country_of_birth ='Poland' OR country_of_birth ='China')
```


**OFFSET , LIMIT
```sql
SELECT * FROM person LIMIT 10 
(결과가 10개만 나옴)

SELECT * FROM person OFFSET 10
(결과가 앞에 10개 건너뛰고 그다음 부터 나옴)

SELECT * FROM person OFFSET 5 LIMIT 10
(6번 부터 16번까지 나옴)

```


**IN
```sql
SELECT * FROM person WHERE country_of_birth = 'China' OR country_of_birth = 'Poland' OR
country_of_birth = 'Brazil'

SELECT * FROM person WHERE country_of_birth IN ('China','Poland','Brazil')
```


**BETWEEN
```sql
SELECT * FROM person WHERE date_of_birth BETWEEN DATE '2000-01-10' AND '2015-01-01' 
```


**LIKE , ILIKE
```sql
SELECT * FROM person WHERE email LIKE '%@google.com'

SELECT * FROM person * WHERE email ILIKE 'p%'
(대소문자를 구분하지 않는다.)

```


**GROUP BY
```sql
SELECT country_of_birth, COUNT(*) FROM person GROUP BY country_of_birth;
(국가 별 사람의 수 )
```


**HAVING (GROUPBY의 조건)
```sql
SELECT country_of_birth, COUNT(*) FROM person GROUP BY country_of_birth HAVING COUNT(*) > 5;

```

--------------------------------

**AGGREGATION FUNCTION
- 공식 문서에서 찾아라

**MAX
```sql
SELECT MAX(price) FROM car;

SELECT MIN(price) FROM car;

SELECT AVG(price) FROM car;

SELECT ROUND(AVG(price)) FROM car;
(반올림)

SELECT make, model, MIN(price) FROM car GROUP BY make, model;
```

**SUM
```sql
SELECT SUM(price) FROM car

SELECT make, SUM(price) FROM car GROUP BY make

```

**산술연산자
```sql
SELECT 10-2;
SELECT 10^2;
SELECT 10/2;

SELECT id, make, model, price, ROUND(price*.90,2) FROM car;
10%할인 된 가격의 차값 을 소숫점 2째자리에서 반올림

```

**Alias
```sql
SELECT id, make, model, price AS original_price FROM car 
```

**Coalesce
```sql
SELECT COALESCE(null,null, 1,10) AS number

SELECT email FROM person (there is null value)
-> SELECT COALESCE(email,'Email not provided') FROM person
(값이 없을 경우 처리할수 있음)

```

**NULLIF
```sql
SELECT 10 /0

SELECT COALESCE(10 / NULLIF(0,0),"ERROR");

```


**DATE
```sql
SELECT NOW()::DATE

SELECT NOW()-INTERVAL '10 DAYS';

SELECT NOW() - INTERVAL '10 MONTHS';

SELECT (NOW()-INTEVAL '10 MONTHS')::DATE

SELECT EXTRACT(YEAR FROM NOW())
```

**AGE
```sql
SELECT first_name, last_name, countruy_of_birth, date_of_birth, AGE(NOW(),date_of_birth) AS age FROM person
```

**Unique Constraint

컬럼의 유니크를 확인하기 위해 Unique 제약 조건을 걸어야 한다
```sql
ALTER TABLE person ADD CONSTRAINT unique_email_address UNIQUE(email)
OR
ALTER TABLE person ADD CONSTRAINT UNIQUE(email)

ALTER TABLE person DROP CONSTRAINT unique_email_address


# 들어오는값 지정 가능
ALTER TABLE person ADD CONSTRAINT gender_constraint CHECK (gender = 'Female' OR gender = 'Male')

ALTER TABLE 
```

**DELETE 
```sql
DELETE FROM person WHERE id = 1011;
```


**UPDATE
```sql
UPDATE person SET email = 'omar@gmail.com' WHERE id = 2011;
UPDATE person SET first_name ="Omar", last_name ="Montana" WHERE id=2011;
```


**CONFLICT
```sql
INSERT INTO person(id,first_name,last_name,gender,email,date_ofbirth, coujtry_of_birth) VALUES (2018,'Russ','test','Male','rruddoch7@hhs.gov',DATE '1952-01-24','Norway') ON CONFLICT (id) DO NOTHING;

...ON CONFLICT (email) DO UPDATE;
```

